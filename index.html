<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Export charts as image  in angular js/ javascript by gansubhai</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Export charts as image  in angular js/ javascript</h1>
      <h2 class="project-tagline">Export charts as image  in angular js/ javascript</h2>
      <a href="https://github.com/gansubhai/downloadcharts" class="btn">View on GitHub</a>
      <a href="https://github.com/gansubhai/downloadcharts/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/gansubhai/downloadcharts/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="about-project" class="anchor" href="#about-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>About Project.</h3>

<p>This project aims at adding the feature of downloading chart images in png or jpeg format in  current angular charts.Further, will add the feature of downloading pdf file containing images of charts.
All charts example has been used from <a href="http://krispo.github.io/angular-nvd3/#/bulletChart">http://krispo.github.io/angular-nvd3/#/bulletChart</a></p>

<h3>
<a id="check-demo-at" class="anchor" href="#check-demo-at" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Check demo at</h3>

<p>Example for Line charts
<a href="http://readinspeed.com/trial/chart/downloadcharts/downloadcharts/LineChart.html">http://readinspeed.com/trial/chart/downloadcharts/downloadcharts/LineChart.html</a></p>

<p>Example for Cumulative Line Chart
<a href="http://readinspeed.com/trial/chart/downloadcharts/downloadcharts/CumalitiveLIneChart.html">http://readinspeed.com/trial/chart/downloadcharts/downloadcharts/CumalitiveLIneChart.html</a></p>

<h3>
<a id="how-to-use-it" class="anchor" href="#how-to-use-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use it?</h3>

<p>Initially, download "Download.zip", unzip it following folder structure can be observed.</p>

<ol>
<li>bower_components</li>
<li>CumalitiveLIneChart.html</li>
<li>LineChart.html</li>
</ol>

<p>Run "LineChart.html" or "CumalitiveLIneChart.html" you will see the demo</p>

<p>To install in your application </p>

<p>1.Following imports need to be added to your HTML file</p>

<pre><code>&lt;script src="bower_components/angular/angular.min.js"&gt;&lt;/script&gt;
&lt;script src="bower_components/d3/d3.min.js"&gt;&lt;/script&gt;
&lt;script src="bower_components/nvd3/build/nv.d3.js"&gt;&lt;/script&gt; &lt;!-- or use another assembly --&gt;
&lt;script src="bower_components/nvd3/angular-nvd3.js"&gt;&lt;/script&gt;
&lt;script src="bower_components/other/FileSaver.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="bower_components/other/rgbcolor.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="bower_components/other/StackBlur.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="bower_components/other/canvg.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="bower_components/other/StackBlur.js"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" href="bower_components/nvd3/build/nv.d3.css"&gt;
</code></pre>

<ol>
<li>
<p>Now add the following code in HTML file implementing graphs.</p>

<p><code>&lt;button ng-click="exportData('testChart')"&gt;Download as image&lt;/button&gt;
&lt;canvas id="canvas" width="3000" height="100"&gt;</code></p>
</li>
</ol>

<p>Here pass id of the chart in exportData function eg: here id is "testChart" so call would be "exportData('testChart')"</p>

<ol>
<li>Now add following methods in your controller.</li>
</ol>

<p>//METHOD-1</p>

<pre><code>`$scope.exportData = function (id) {
var el = document.createElement( 'html' );
el.innerHTML =document.getElementById(id).innerHTML;
var svgContent=el.getElementsByTagName( 'svg' );
var contentModified=svgContent[0].outerHTML;
contentModified=contentModified.replace('style="height: 450px; width: 100%;"','style="height: 450px; width: 100%;fill:#fff;"');
contentModified=contentModified.replace(new RegExp('style="text-anchor: middle;"', 'g'), 'style="text-anchor:   middle;fill:black;"');
contentModified=contentModified.replace(new RegExp('style="text-anchor: end;"', 'g'), 'style="text-anchor: end;fill:black;"');
$scope.render(contentModified,1500,500);
};`
</code></pre>

<p>//METHOD-2</p>

<pre><code>`$scope.render=function(svg, width, height){
document.createElement('canvas')
var c = document.createElement('canvas');
c.width = width || 1500;
c.height = height || 500;
document.getElementById('canvas').innerHTML = '';
document.getElementById('canvas').appendChild(c);
if (typeof FlashCanvas != "undefined") {
FlashCanvas.initElement(c);
}
canvg(c, svg, { log: true, renderCallback: function (dom) {
if (typeof FlashCanvas != "undefined") {
document.getElementById('svg').innerHTML = 'svg not supported';
} else {
var svg = (new XMLSerializer()).serializeToString(dom);
var canvasdata = c.toDataURL("image/png");
var pngimg = '&lt;img src="'+canvasdata+'"&gt;
 var a = document.createElement("a"); 
 a.download = "sample.png";
a.href = canvasdata;
a.click();
}
}});
};`
</code></pre>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>In 2015 <a href="https://github.com/gansubhai" class="user-mention">@gansubhai</a> created this project to provide download feature to charts.</p>

<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? (<a href="http://readinspeed.com/#three">http://readinspeed.com/#three</a>) and weâ€™ll help you sort it out.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/gansubhai/downloadcharts">Export charts as image  in angular js/ javascript</a> is maintained by <a href="https://github.com/gansubhai">gansubhai</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
